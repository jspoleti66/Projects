<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Prueba Streaming D-ID</title>
  <style>
    body { font-family: sans-serif; text-align: center; margin-top: 2em; }
    video { width: 400px; border-radius: 1em; margin-top: 1em; }
  </style>
</head>
<body>
  <h1>Prueba de Streaming en Tiempo Real con D-ID</h1>
  <button id="startBtn">Iniciar Avatar</button>
  <video id="avatar" autoplay muted playsinline></video>

  <script type="module">
    import DID from "https://cdn.jsdelivr.net/npm/@d-id/webrtc@latest/dist/index.min.js";

    const startBtn = document.getElementById('startBtn');
    const videoElement = document.getElementById('avatar');

    startBtn.onclick = async () => {
      const stream = await DID.createTalkStream({
        apiKey: "TU_API_KEY_AQUI", // <-- reemplaza con tu API key de D-ID
        sourceUrl: "https://i.imgur.com/p0MUxcq.png",
        script: {
          type: "text",
          input: "Hola, soy tu clon interactivo. Estoy transmitiendo en tiempo real.",
          provider: {
            type: "microsoft",
            voice_id: "es-ES-ElviraNeural"
          }
        },
        config: {
          fluent: true,
          pad_audio: 0.5
        },
        videoElement
      });

      await stream.start();
    };
  </script>
</body>
</html>
